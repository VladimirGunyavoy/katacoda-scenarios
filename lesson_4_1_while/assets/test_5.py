import os
import json
import re

from checker import SberChecker

index = re.search(r'\d+', os.path.basename(__file__)).group()

filename = f'step_{index}.py'

my_tests = [
    {
        'input': [8],
        'output': [
            "размер очереди 10",
            "количество металла 30",
            "спасибо, досвидания",
            "",
            "размер очереди 9",
            "количество металла 48",
            "спасибо, досвидания",
            "",
            "размер очереди 8",
            "количество металла 49",
            "спасибо, досвидания",
            "",
            "размер очереди 7",
            "количество металла 17",
            "спасибо, досвидания",
            "",
            "размер очереди 6",
            "количество металла 25",
            "спасибо, досвидания",
            "",
            "размер очереди 5",
            "количество металла 91",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 5",
            "количество металла 6",
            "спасибо, досвидания",
            "",
            "размер очереди 4",
            "количество металла 11",
            "спасибо, досвидания",
            "",
            "размер очереди 3",
            "количество металла 18",
            "спасибо, досвидания",
            "",
            "размер очереди 2",
            "количество металла 32",
            "спасибо, досвидания",
            "",
            "размер очереди 1",
            "количество металла 65",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 1",
            "количество металла 27",
            "спасибо, досвидания"
        ]
    },
    {
        'input': [0],
        'output': [
            "размер очереди 10",
            "количество металла 50",
            "спасибо, досвидания",
            "",
            "размер очереди 9",
            "количество металла 98",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 9",
            "количество металла 54",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 9",
            "количество металла 6",
            "спасибо, досвидания",
            "",
            "размер очереди 8",
            "количество металла 34",
            "спасибо, досвидания",
            "",
            "размер очереди 7",
            "количество металла 66",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 7",
            "количество металла 63",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 7",
            "количество металла 52",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 7",
            "количество металла 39",
            "спасибо, досвидания",
            "",
            "размер очереди 6",
            "количество металла 62",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 6",
            "количество металла 46",
            "спасибо, досвидания",
            "",
            "размер очереди 5",
            "количество металла 75",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 5",
            "количество металла 28",
            "спасибо, досвидания",
            "",
            "размер очереди 4",
            "количество металла 65",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 4",
            "количество металла 18",
            "спасибо, досвидания",
            "",
            "размер очереди 3",
            "количество металла 37",
            "спасибо, досвидания",
            "",
            "размер очереди 2",
            "количество металла 18",
            "спасибо, досвидания",
            "",
            "размер очереди 1",
            "количество металла 97",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 1",
            "количество металла 13",
            "спасибо, досвидания"
        ]
    },
    {
        'input': [1],
        'output': [
            "размер очереди 10",
            "количество металла 18",
            "спасибо, досвидания",
            "",
            "размер очереди 9",
            "количество металла 73",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 9",
            "количество металла 98",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 9",
            "количество металла 9",
            "спасибо, досвидания",
            "",
            "размер очереди 8",
            "количество металла 33",
            "спасибо, досвидания",
            "",
            "размер очереди 7",
            "количество металла 16",
            "спасибо, досвидания",
            "",
            "размер очереди 6",
            "количество металла 64",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 6",
            "количество металла 98",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 6",
            "количество металла 58",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 6",
            "количество металла 61",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 6",
            "количество металла 84",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 6",
            "количество металла 49",
            "спасибо, досвидания",
            "",
            "размер очереди 5",
            "количество металла 27",
            "спасибо, досвидания",
            "",
            "размер очереди 4",
            "количество металла 13",
            "спасибо, досвидания",
            "",
            "размер очереди 3",
            "количество металла 63",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 3",
            "количество металла 4",
            "спасибо, досвидания",
            "",
            "размер очереди 2",
            "количество металла 50",
            "спасибо, досвидания",
            "",
            "размер очереди 1",
            "количество металла 56",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 1",
            "количество металла 78",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 1",
            "количество металла 98",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 1",
            "количество металла 99",
            "пройдете на дополнительный осмотр",
            "",
            "размер очереди 1",
            "количество металла 1",
            "спасибо, досвидания"
        ]
    },
]

precode = """
import random
random.seed(int(input()))
"""

sber_checker = SberChecker(
    filename=filename,
    tests=my_tests,
    should_include=lambda code: 'continue' in code,
    should_include_message='необходимо использовать команду continue',
    precode=precode
)
res = sber_checker.run()

json_res = json.dumps(res, indent=4, ensure_ascii=False)

print(json_res)
